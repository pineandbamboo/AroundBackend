/*!
 * 1DS JS SDK POST plugin, 3.2.7
 * Copyright (c) Microsoft and contributors. All rights reserved.
 * (Microsoft Internal Only)
 */
!function(i){"use strict";var c="function",$="object",V="undefined",u="prototype",o="hasOwnProperty",t=Object,n=t[u],l=t.assign,e=(t.create,t.defineProperty),S=n[o],f=null;function P(n){return void 0===n&&(n=!0),f&&n||(typeof globalThis!==V&&globalThis&&(f=globalThis),typeof self!==V&&self&&(f=self),typeof window!==V&&window&&(f=window),typeof global!==V&&global&&(f=global)),f}function R(n){throw new TypeError(n)}(P()||{}).Symbol,(P()||{}).Reflect;var k=function(n,e){return(k=t.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)e[o](t)&&(n[t]=e[t])})(n,e)},O="constructor",h="prototype",M="function",K="_dynInstFuncs",I="_isDynProxy",A="_dynClass",B="_dynInstChk",L=B,N="_dfOpts",H="_unknown_",D="__proto__",q="_dyn"+D,F="_dynInstProto",U="useBaseInst",z="setInstFuncs",j=Object,X=j.getPrototypeOf,Q=j.getOwnPropertyNames,J=0;function p(n,e){return n&&j[h].hasOwnProperty.call(n,e)}function W(n){return n&&(n===j[h]||n===Array[h])}function ln(n){return W(n)||n===Function[h]}function y(n){if(n){if(X)return X(n);var e=n[D]||n[h]||(n[O]?n[O][h]:null),t=n[q]||e;p(n,q)||(delete n[F],t=n[q]=n[F]||n[q],n[F]=e)}return t}function fn(n,e){var t=[];if(Q)t=Q(n);else for(var r in n)"string"==typeof r&&p(n,r)&&t.push(r);if(t&&0<t.length)for(var i=0;i<t.length;i++)e(t[i])}function dn(n,e,t){return e!==O&&typeof n[e]===M&&(t||p(n,e))}function vn(n){throw new TypeError("DynamicProto: "+n)}function hn(n,e){for(var t=n.length-1;0<=t;t--)if(n[t]===e)return 1}function pn(n,e){return p(n,h)?n.name||e||H:((n||{})[O]||{}).name||e||H}function g(n,r,e,t){p(n,h)||vn("theClass is an invalid class definition.");var i,o,u,a,c,s,l=n[h],f=(function(n){if(!X)return 1;for(var e=[],t=y(r);t&&!ln(t)&&!hn(e,t);){if(t===n)return 1;e.push(t),t=y(t)}}(l)||vn("["+pn(n)+"] is not in class hierarchy of ["+pn(r)+"]"),null),n=(p(l,A)?f=l[A]:(f="_dynCls$"+pn(n,"_")+"$"+J,J++,l[A]=f),g[N]),d=!!n[U],v=(d&&t&&t[U]!==undefined&&(d=!!t[U]),o={},fn(i=r,function(n){!o[n]&&dn(i,n,!1)&&(o[n]=i[n])}),o),d=(e(r,function(n,e,t,o){function r(n,e,t){var r,i=e[t];return i[I]&&o&&!1!==(r=n[K]||{})[L]&&(i=(r[e[A]]||{})[t]||i),function(){return i.apply(n,arguments)}}for(var i={},u=(fn(t,function(n){i[n]=r(e,t,n)}),y(n)),a=[];u&&!ln(u)&&!hn(a,u);)fn(u,function(n){!i[n]&&dn(u,n,!X)&&(i[n]=r(e,u,n))}),a.push(u),u=y(u);return i}(l,r,v,d)),!!X&&!!n[z]);u=l,e=f,a=r,c=v,n=0!=(d&&t?!!t[z]:d),W(u)||(l=a[K]=a[K]||{},s=l[e]=l[e]||{},!1!==l[L]&&(l[L]=!!n),fn(a,function(n){var t,r,i;dn(a,n,!1)&&a[n]!==c[n]&&(s[n]=a[n],delete a[n],p(u,n)&&(!u[n]||u[n][I])||(u[n]=(t=u,r=n,(i=function(){var n,e;return(function(n,e,t,r){var i=null;if(n&&p(t,A)){var o=n[K]||{};if((i=(o[t[A]]||{})[e])||vn("Missing ["+e+"] "+M),!i[B]&&!1!==o[L]){for(var u=!p(n,e),a=y(n),c=[];u&&a&&!ln(a)&&!hn(c,a);){var s=a[e];if(s){u=s===r;break}c.push(a),a=y(a)}try{u&&(n[e]=i),i[B]=1}catch(l){o[L]=!1}}}return i}(this,r,t,i)||(typeof(e=(e=t[n=r])===i?y(t)[n]:e)!==M&&vn("["+n+"] is not a "+M),e)).apply(this,arguments)})[I]=1,i)))}))}g[N]={setInstFuncs:!0,useBaseInst:!0};var yn="name",gn="identifier",m="push",mn="isInitialized",bn="config",_n="logger",nn="length",wn="time",b="processNext",xn="getPlugin",_="teardown",Sn="messageId",Tn="message",Cn="isAsync",En="_doTeardown",Pn="update",w="getNext",Rn="diagLog",kn="setNextPlugin",On="createNew",Mn="userAgent",Kn="split",In="nodeType",An="replace",Bn="enableDebugExceptions",v="call",x="type",Ln="handler",Nn="isChildEvt",Hn="getCtx",s="setCtx",Dn="complete",d="",T="core",qn="disabled",Fn="extensionConfig",Un="processTelemetry",zn="priority",jn="errorToConsole",Xn="warnToConsole",Qn="getPerfMgr",Jn="startsWith",Wn="indexOf",$n="trim",Vn="toString",Gn="constructor",Yn=e,Zn=t.freeze,ne=t.keys,r=String[u],ee=r[$n],te=r[Jn],r=Array.isArray,re=n[Vn],ie=S[Vn],oe=ie[v](t),ue=/-([a-z])/g,ae=/([^\w\d_$])/g,ce=/^(\d+[\w\d_$])/,se=Object.getPrototypeOf;function G(n){return n===undefined||typeof n===V}function Y(n){return null===n||G(n)}function le(n){return!(!n||typeof n!==$)}function C(n){return!(!n||typeof n!==c)}function fe(n){var e=n;return n&&he(n)?(e=(e=n[An](ue,function(n,e){return e.toUpperCase()}))[An](ae,"_"))[An](ce,function(n,e){return"_"+e}):e}function en(n,e){if(n)for(var t in n)S[v](n,t)&&e[v](n,t,n[t])}function de(n,e){var t=!1;if(n&&e&&!(t=n===e)){if(te)return n[Jn](e);var r=n,i=e,n=!1,o=i?i[nn]:0;if(r&&o&&r[nn]>=o&&!(n=r===i)){for(var u=0;u<o;u++)if(r[u]!==i[u])return!1;n=!0}return n}return t}function ve(n,e){return!(!n||!e||!~n.indexOf(e))}var tn=r||function(n){return!(!n||"[object Array]"!==re[v](n))};function he(n){return"string"==typeof n}function pe(n){return"number"==typeof n}function ye(n){return"boolean"==typeof n}function ge(n){return n&&"object"==typeof n&&(!(n=(se||function(n){if(n){if(se)return se(n);n=n.__proto__||n[u]||n[Gn];if(n)return n}return null})(n))||typeof(n=n[Gn]&&S[v](n,Gn)?n[Gn]:n)===c&&ie[v](n)===oe)}function rn(n,e,t){var r=n[nn];try{for(var i=0;i<r&&!(i in n&&-1===e[v](t||n,n[i],i,n));i++);}catch(o){}}function me(n,e,t){if(n){if(n[Wn])return n[Wn](e,t);var r=n[nn],t=t||0;try{for(var i=Math.max(0<=t?t:r-Math.abs(t),0);i<r;i++)if(i in n&&n[i]===e)return i}catch(o){}}return-1}function be(n){return n&&(ee&&n[$n]?n[$n]():n[An]?n[An](/^\s+|\s+$/g,d):n)}var _e=!{toString:null}.propertyIsEnumerable("toString"),we=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function xe(n){var e=typeof n;if(e===c||e===$&&null!==n||R("objKeys called on non-object"),!_e&&ne)return ne(n);var t,r=[];for(t in n)n&&S[v](n,t)&&r[m](t);if(_e)for(var i=we[nn],o=0;o<i;o++)n&&S[v](n,we[o])&&r[m](we[o]);return r}function Se(n,e,t,r){if(Yn)try{var i={enumerable:!0,configurable:!0};return t&&(i.get=t),r&&(i.set=r),Yn(n,e,i),!0}catch(o){}return!1}var Te=Zn||function(n){return n};function Ce(){var n=Date;return n.now?n.now():(new n).getTime()}function Ee(n,e){return Y(n)?e:n}function Pe(n){return n&&l?t(l({},n)):n}Re={},en({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5},function(n,e){Re[n]=e,Re[e]=n}),n=Re,Zn&&en(n,function(n,e){(tn(e)||le(e))&&Zn(e)});var Re,ke=Te(n),Oe="window",Me="document",Ke="navigator",Ie="console",Ae="performance",Be="JSON",Le="ReactNative",Ne="XMLHttpRequest",He=null,De=null,qe=null,Fe=null;function Ue(n,e){var t,r=!1;if(n){try{(r=e in n)||(t=n[u])&&(r=e in t)}catch(i){}if(!r)try{r=!G((new n)[e])}catch(i){}}return r}function on(n){var e=P();return e&&e[n]?e[n]:n===Oe&&ze()?window:null}function ze(){return typeof window===$&&window}function je(){return ze()?window:on(Oe)}function Xe(){return typeof document===$&&document?document:on(Me)}function Qe(){return!(typeof navigator!==$||!navigator)}function Je(){return Qe()?navigator:on(Ke)}function We(){return typeof JSON===$&&JSON||null!==on(Be)}function $e(){return We()?JSON||on(Be):null}function Ve(){var n=Je();return n&&n.product&&n.product===Le}function Z(n){var e=Object[u].toString[v](n),t=d;return"[object Error]"===e?t="{ stack: '"+n.stack+"', message: '"+n.message+"', name: '"+n[yn]+"'":We()&&(t=$e().stringify(n)),e+t}function Ge(){return Fe=null===Fe?Qe()&&!!Je().sendBeacon:Fe}function Ye(n){var e=!1;try{var e=!!on("fetch"),t=on("Request");e&&n&&t&&(e=Ue(t,"keepalive"))}catch(r){}return e}function Ze(){var n=!1;try{n=!!on(Ne)}catch(e){}return n}var nt=null;function et(n){return n?'"'+n[An](/\"/g,d)+'"':d}function tt(n,e){var t=typeof console!==V?console:on(Ie);t&&C(t[n=t[n]?n:"log"])&&t[n](e)}it.dataType="MessageData";var rt=it;function it(n,e,t,r){void 0===t&&(t=!1),this[Sn]=n,this[Tn]=(t?"AI: ":"AI (Internal): ")+n;t=d,We()&&(t=$e().stringify(r)),n=(e?" message:"+et(e):d)+(r?" props:"+et(t):d);this[Tn]+=n}ut.__ieDyn=1;var ot=ut;function ut(i){this.identifier="DiagnosticLogger",this.queue=[];var c,s,l,f,d=0,v={};g(ut,this,function(o){var n;function u(n,e){var t,r;l<=d||(r=!0,t="AITR_"+e[Sn],v[t]?r=!1:v[t]=!0,r&&(n<=s&&(o.queue[m](e),d++,a(1===n?"error":"warn",e)),d===l&&(r=new rt(23,t="Internal events throttle limit per PageView reached for this app.",!1),o.queue[m](r),1===n?o[jn](t):o[Xn](t))))}function a(n,e){var t,r=(t=(t=nt)||!0===(i||{}).disableDbgExt?t:nt||(r=on("Microsoft"),nt=r?r.ApplicationInsights:nt))?t.ChromeDbgExt:null;r&&r[Rn]&&r[Rn](n,e)}c=Ee((n=i||{}).loggingLevelConsole,0),s=Ee(n.loggingLevelTelemetry,1),l=Ee(n.maxMessageLimit,25),f=Ee(n[Bn],!1),o.consoleLoggingLevel=function(){return c},o.telemetryLoggingLevel=function(){return s},o.maxInternalMessageLimit=function(){return l},o[Bn]=function(){return f},o.throwInternal=function(n,e,t,r,i){e=new rt(e,t,i=void 0!==i&&i,r);if(f)throw Z(e);t=1===n?jn:Xn;G(e[Tn])?a("throw"+(1===n?"Critical":"Warning"),e):(i?(r=+e[Sn],!v[r]&&n<=c&&(o[t](e[Tn]),v[r]=!0)):n<=c&&o[t](e[Tn]),u(n,e))},o[Xn]=function(n){tt("warn",n),a("warning",n)},o[jn]=function(n){tt("error",n),a("error",n)},o.resetInternalMessageCount=function(){d=0,v={}},o.logInternalMessage=u})}function at(n){return n||new ot}function un(n,e,t,r,i,o){void 0===o&&(o=!1),at(n).throwInternal(e,t,r,i,o)}function ct(n,e){at(n)[Xn](e)}var st="ParentContextKey",lt="ChildrenContextKey",ft=(a.ParentContextKey="parent",a.ChildrenContextKey="childEvts",a);function a(n,i,e){var t,o=this,u=!1;o.start=Ce(),o[yn]=n,o[Cn]=e,o[Nn]=function(){return!1},C(i)&&(u=Se(o,"payload",function(){return!t&&C(i)&&(t=i(),i=null),t})),o[Hn]=function(n){return n?(n===a[st]||n===a[lt]?o:o.ctx||{})[n]:null},o[s]=function(n,e){n&&(n===a[st]?(o[n]||(o[Nn]=function(){return!0}),o[n]=e):n===a[lt]?o[n]=e:(o.ctx=o.ctx||{})[n]=e)},o[Dn]=function(){var n=0,e=o[Hn](a[lt]);if(tn(e))for(var t=0;t<e[nn];t++){var r=e[t];r&&(n+=r[wn])}o[wn]=Ce()-o.start,o.exTime=o[wn]-n,o[Dn]=function(){},!u&&C(i)&&(o.payload=i())}}var dt="CoreUtils.doPerf";function an(n,e,t,r,i){if(n)if(n=n[Qn]?n[Qn]():n){var o,u=void 0,a=n[Hn](dt);try{if(u=n.create(e(),r,i))return a&&u[s]&&(u[s](ft[st],a),a[Hn]&&a[s]&&((o=a[Hn](ft[lt]))||(o=[],a[s](ft[lt],o)),o[m](u))),n[s](dt,u),t(u)}catch(c){u&&u[s]&&u[s]("exception",c)}finally{u&&n.fire(u),n[s](dt,a)}}return t()}var vt=4294967296,ht=4294967295,pt=!1,yt=123456789,gt=987654321;function mt(n){var e,t=0,r=on("crypto")||on("msCrypto");if(0===(t=r&&r.getRandomValues?r.getRandomValues(new Uint32Array(1))[0]&ht:t)&&(!(r=Je())||r[Mn]===De&&null!==He||(r=((De=r[Mn])||d).toLowerCase(),He=ve(r,"msie")||ve(r,"trident/")),He)){if(!pt)try{var i=2147483647&Ce();(e=(Math.random()*vt^i)+i)<0&&(e>>>=0),yt=123456789+e&ht,gt=987654321-e&ht,pt=!0}catch(o){}r=((gt=36969*(65535&gt)+(gt>>16)&ht)<<16)+(65535&(yt=18e3*(65535&yt)+(yt>>16)&ht))>>>0&ht|0,t=(r>>>=0)&ht}return 0===t&&(t=Math.floor(vt*Math.random()|0)),n||(t>>>=0),t}var bt=e,_t="."+function(n){void 0===n&&(n=22);for(var e=mt()>>>0,t=0,r=d;r[nn]<n;)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[0|63&e]||"",e>>>=6,5==++t&&(e=(mt()<<2&4294967295|3&e)>>>0,t=0);return r}(6),wt=0;function xt(n){return 1===n[In]||9===n[In]||!+n[In]}function St(n,e){return fe(n+wt+++((e=void 0!==e&&e)?".2.8.8":d)+_t)}function Tt(n){var o={id:St("_aiData-"+(n||d)+".2.8.8"),accept:xt,get:function(n,e,t,r){var i=n[o.id];return i?i[fe(e)]:(r&&((i=function(n,e){var t=e[n.id];if(!t){t={};try{xt(e)&&!function(n,e,t){if(bt)try{return bt(n,e,{value:t,enumerable:!1,configurable:!0}),1}catch(r){}}(e,n.id,t)&&(e[n.id]=t)}catch(r){}}return t}(o,n))[fe(e)]=t),t)},kill:function(n,e){if(n&&n[e])try{delete n[e]}catch(t){}}};return o}var Ct="attachEvent",Et="addEventListener",Pt="detachEvent",Rt="removeEventListener",kt="events",Ot="visibilitychange",Mt="pagehide",Kt="pageshow",It="beforeunload",At=St("aiEvtPageHide"),Bt=St("aiEvtPageShow"),Lt=/\.[\.]+/g,Nt=/[\.]+$/,Ht=1,Dt=Tt("events"),qt=/^([^.]*)(?:\.(.+)|)/;function Ft(n){return n&&n[An]?n.replace(/^\s*\.*|\.*\s*$/g,d):n}function Ut(n,e){e&&(t=d,tn(e)?(t=d,rn(e,function(n){(n=Ft(n))&&("."!==n[0]&&(n="."+n),t+=n)})):t=Ft(e),t&&("."!==t[0]&&(t="."+t),n=(n||d)+t));var t,e=qt.exec(n||d)||[],n={};return n[x]=e[1],n.ns=(e[2]||d).replace(Lt,".").replace(Nt,d)[Kn](".").sort().join("."),n}function zt(n,e,t){n=Dt.get(n,kt,{},t=void 0===t||t);return n[e]||(n[e]=[])}function jt(n,e,t,r){n&&e&&e[x]&&(n[Rt]?n[Rt](e[x],t,r):n[Pt]&&n[Pt]("on"+e[x],t))}function Xt(n,e,t,r){for(var i=e[nn];i--;){var o=e[i];!o||t.ns&&t.ns!==o.evtName.ns||r&&!r(o)||(jt(n,o.evtName,o[Ln],o.capture),e.splice(i,1))}}function Qt(n,e){return e?Ut("xx",tn(e)?[n].concat(e):[n,e]).ns[Kn]("."):n}function Jt(n,e,t,r,i){void 0===i&&(i=!1);var o,u,a=!1;if(n)try{var c,s=Ut(e,r),l=s,f=t,d=i,v=!1;(u=n)&&l&&l[x]&&f&&(u[Et]?(u[Et](l[x],f,d),v=!0):u[Ct]&&(u[Ct]("on"+l[x],f),v=!0)),(a=v)&&Dt.accept(n)&&((o={guid:Ht++,evtName:s})[Ln]=t,o.capture=i,c=o,zt(n,s.type)[m](c))}catch(h){}return a}function Wt(n,e,t,r,i){if(void 0===i&&(i=!1),n)try{var o=Ut(e,r),u=!1,a=n,c=function(n){return!((!o.ns||t)&&n[Ln]!==t)&&(u=!0)};(s=o)[x]?Xt(a,zt(a,s[x]),s,c):(en(l=Dt.get(a,kt,{}),function(n,e){Xt(a,e,s,c)}),0===xe(l)[nn]&&Dt.kill(a,kt)),u||jt(n,o,t,i)}catch(f){}var s,l}function $t(n,o,u,a){var c=!1;return o&&n&&0<n[nn]&&rn(n,function(n){var e,t,r,i;!n||u&&-1!==me(u,n)||(n=n,e=o,t=a,r=!1,(i=je())&&(r=Jt(i,n,e,t),r=Jt(i.body,n,e,t)||r),i=Xe(),c=(r=i&&Jt(i,n,e,t)||r)||c)}),c}function Vt(n,i,o){n&&tn(n)&&rn(n,function(n){var e,t,r;n&&(n=n,e=i,t=o,(r=je())&&(Wt(r,n,e,t),Wt(r.body,n,e,t)),(r=Xe())&&Wt(r,n,e,t))})}var Gt=Tt("plugin");function Yt(n){return Gt.get(n,"state",{},!0)}var Zt="TelemetryPluginChain",nr="_hasRun",er="_getTelCtx",tr=0;function rr(n,u,t,e){var r=null,i=[],o=(null!==e&&(r=e?function(n,e,t){for(;n;){if(n[xn]()===t)return n;n=n[w]()}return or([t],e[bn]||{},e)}(n,t,e):n),{_next:function(){var n,e=r;return r=e?e[w]():null,e||(n=i)&&0<n[nn]&&(rn(n,function(n){try{n.func[v](n.self,n.args)}catch(e){un(t[_n],2,73,"Unexpected Exception during onComplete - "+Z(e))}}),i=[]),e},ctx:{core:function(){return t},diagLog:function(){return(t||{})[_n]||new ot(u)},getCfg:function(){return u},getExtCfg:a,getConfig:function(n,e,t){void 0===t&&(t=!1);var r,n=a(n,null);return n&&!Y(n[e])?r=n[e]:u&&!Y(u[e])&&(r=u[e]),Y(r)?t:r},hasNext:function(){return!!r},getNext:function(){return r},setNext:function(n){r=n},iterate:function(n){for(;e=o._next();){var e=e[xn]();e&&n(e)}},onComplete:function(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];n&&i[m]({func:n,self:G(e)?o.ctx:e,args:t})}}});function a(n,e,t){var r,i,o;return void 0===e&&(e={}),void 0===t&&(t=0),(r=u&&(i=u[Fn])&&n?i[n]:r)?le(e)&&0!==t&&(o=function d(){var n=arguments,e=n[0]||{},t=n[nn],r=!1,i=1;for(0<t&&ye(e)&&(r=e,e=n[i]||{},i++),le(e)||(e={});i<t;i++){var o,u,a,c,s=n[i],l=tn(s),f=le(s);for(o in s)(l&&o in s||f&&S[v](s,o))&&(u=s[o],a=void 0,r&&u&&((a=tn(u))||ge(u))&&(c=e[o],a?tn(c)||(c=[]):ge(c)||(c={}),u=d(r,c,u)),u!==undefined&&(e[o]=u))}return e}(!0,e,r),u&&2===t&&en(e,function(n){var e;Y(o[n])&&!Y(e=u[n])&&(o[n]=e)}),r=o):r=e,r}return o}function ir(n,t,r,e){var i=rr(n,t,r,e),o=i.ctx;return o[b]=function(n){var e=i._next();return e&&e[Un](n,o),!e},o[On]=function(n,e){return ir((n=tn(n=void 0===n?null:n)?or(n,t,r,e):n)||o[w](),t,r,e)},o}function or(n,e,t,r){var i,o=null,u=!r;return tn(n)&&0<n[nn]&&(i=null,rn(n,function(n){(u=!u&&r===n||u)&&n&&C(n[Un])&&(n=ur(n,e,t),o=o||n,i&&i._setNext(n),i=n)})),r&&!o?or([r],e,t):o}function ur(c,r,i){var s=null,o=C(c[Un]),u=C(c[kn]),l=c?c[gn]+"-"+c[zn]+"-"+tr++:"Unknown-0-"+tr++,a={getPlugin:function(){return c},getNext:function(){return s},processTelemetry:function(t,n){var e;f(n=n||(e=(e=c&&C(c[er])?c[er]():e)||ir(a,r,i)),function(n){var e;return!(!c||!o||(e=Yt(c))[_]||e[qn]||(u&&c[kn](s),c[Un](t,n),0))},"processTelemetry",function(){return{item:t}},!t.sync)||n[b](t)},unload:function(r,i){f(r,function(){var n,e,t=!1;return c&&(n=Yt(c),e=c[T]||n[T],!c||e&&e!==r.core()||n[_]||(n[T]=null,n[_]=!0,n[mn]=!1,c[_]&&!0===c[_](r,i)&&(t=!0))),t},"unload",function(){},i[Cn])||r[b](i)},update:function(r,i){f(r,function(){var n,e,t=!1;return c&&(n=Yt(c),e=c[T]||n[T],!c||e&&e!==r.core()||n[_]||c[Pn]&&!0===c[Pn](r,i)&&(t=!0)),t},"update",function(){},!1)||r[b](i)},_id:l,_setNext:function(n){s=n}};function f(t,r,i,n,e){var o=!1,u=c?c[gn]:Zt,a=(a=t[nr])||(t[nr]={});return t.setNext(s),c&&an(t[T](),function(){return u+":"+i},function(){a[l]=!0;try{var n=s?s._id:d;n&&(a[n]=!1),o=r(t)}catch(e){n=!s||a[s._id];n&&(o=!0),s&&n||un(t[Rn](),1,73,"Plugin ["+u+"] failed during "+i+" - "+Z(e)+", run flags: "+Z(a))}},n,e),o}return Te(a)}function ar(){var e=[];return{add:function(n){n&&e[m](n)},run:function(t,r){rn(e,function(n){try{n(t,r)}catch(e){un(t[Rn](),2,73,"Unexpected error calling unload handler - "+Z(e))}}),e=[]}}}var E="getPlugin",Vn=(cr.__ieDyn=1,cr);function cr(){var o,u,l,f,d,a=this;function e(n){var e,n=n=void 0===n?null:n;return n||(e=u||ir(null,{},a[T]),n=l&&l[E]?e[On](null,l[E]):e[On](null,l)),n}function c(n,e,t){n&&(r=i=[],n&&(r=n[Fn])!==i&&Y(r)&&(n[Fn]=r=i)),!t&&e&&(t=e.getProcessTelContext()[w]());var r,i=l;l&&l[E]&&(i=l[E]()),a[T]=e,u=ir(t,n,e,i)}function v(){o=!1,a[T]=null,l=u=null,d=[],f=ar()}v(),g(cr,a,function(s){var n,e,t,r,i;s.initialize=function(n,e,t,r){c(n,e,r),o=!0},s[_]=function(n,e){var t,r,i,o,u=s[T];if(u&&(!n||u===n[T]()))return r=!1,i=n||function c(n,t,e){var r=t[bn]||{},i=rr(n,r,t,e),o=i.ctx;return o[b]=function(n){var e=i._next();return e&&e.unload(o,n),!e},o[On]=function(n,e){return c((n=tn(n=void 0===n?null:n)?or(n,r,t,e):n)||o[w](),t,e)},o}(null,u,l&&l[E]?l[E]():l),o=e||((n={reason:0})[Cn]=!1,n),s[En]&&!0===s[En](i,o,a)?t=!0:a(),t;function a(){var n;r||(r=!0,f.run(i,e),n=d,d=[],rn(n,function(n){n.rm()}),!0===t&&i[b](o),v())}},s[Pn]=function(n,e){var t,r,i,o=s[T];if(o&&(!n||o===n[T]()))return r=!1,i=n||function a(n,t,e){var r=t[bn]||{},i=rr(n,r,t,e).ctx;return i[b]=function(e){return i.iterate(function(n){C(n[Pn])&&n[Pn](i,e)})},i[On]=function(n,e){return a((n=tn(n=void 0===n?null:n)?or(n,r,t,e):n)||i[w](),t,e)},i}(null,o,l&&l[E]?l[E]():l),s._doUpdate&&!0===s._doUpdate(i,e||{reason:0},u)?t=!0:u(),t;function u(){r||(r=!0,c(i.getCfg(),i.core(),i[w]()))}},s._addHook=function(n){n&&(tn(n)?d=d.concat(n):d[m](n))},t="_addUnloadCb",e=function(){return f},(n=s)&&e&&(n[t]=(i=r=null,C(t=e)?r=t:i=t,function(){var n=arguments;if(i=r?r():i)return i.add.apply(i,n)}))}),a[Rn]=function(n){return e(n)[Rn]()},a[mn]=function(){return o},a.setInitialized=function(n){o=n},a[kn]=function(n){l=n},a[b]=function(n,e){e?e[b](n):l&&C(l[Un])&&l[Un](n,null)},a._getTelCtx=e}var sr="",lr="withCredentials",fr=((r={})[0]=0,r[2]=6,r[1]=1,r[3]=7,r[4098]=6,r[4097]=1,r[4099]=7,r);function cn(n){return n!==sr&&!Y(n)}function dr(n,e,t){var r=-1;return G(n)||(0<e&&(32===e?r=8192:e<=13&&(r=e<<5)),0<=t&&t<=9?(-1===r&&(r=0),r|=t):(e=fr[function i(n){var e,t=0;return null!==n&&n!==undefined&&("string"==(e=typeof n)?t=1:"number"==e?t=2:"boolean"==e?t=3:e===$&&(t=4,tn(n)?(t=4096,0<n.length&&(t|=i(n[0]))):S.call(n,"value")&&(t=8192|i(n.value)))),t}(n)]||-1,-1!==r&&-1!==e?r|=e:6===e&&(r=e))),r}function vr(){var r={},e=!1,n=0,t=arguments.length,i=Object[u],o=arguments;for("[object Boolean]"===i.toString.call(o[0])&&(e=o[0],n++);n<t;n++)en(o[n],function(t,n){e&&n&&le(n)?tn(n)?(r[t]=r[t]||[],rn(n,function(n,e){n&&le(n)?r[t][e]=vr(!0,r[t][e],n):r[t][e]=n})):r[t]=vr(!0,r[t],n):r[t]=n});return r}Xe(),je();var sn=function(){var n=on(Ae);return n&&n.now?n.now():Ce()};function hr(n,e){n.timings=n.timings||{},n.timings.processTelemetryStart=n.timings.processTelemetryStart||{},n.timings.processTelemetryStart[e]=sn()}var pr="REAL_TIME",yr="drop",n="requeue",gr="application/x-json-stream",mr="cache-control",br="content-type",_r="kill-duration",wr="time-delta-millis",xr="client-version",Sr="client-id",Tr="time-delta-to-apply-millis",Cr="upload-time",Er="apikey",Pr="AuthMsaDeviceTicket",e="AuthXToken",Rr="msfpc",kr="user";function Or(n){n=(n.ext||{}).intweb;return n&&cn(n[Rr])?n[Rr]:null}function Mr(n){for(var e=null,t=0;null===e&&t<n.length;t++)e=Or(n[t]);return e}Ir.create=function(n,e){return new Ir(n,e)};var Kr=Ir;function Ir(r,n){var i=n?[].concat(n):[],n=this,o=Mr(i);n.iKey=function(){return r},n.Msfpc=function(){return o||""},n.count=function(){return i.length},n.events=function(){return i},n.addEvent=function(n){return!!n&&(i.push(n),o=o||Or(n),!0)},n.split=function(n,e){var t;return n<i.length&&(t=i.length-n,Y(e)||(t=e<t?e:t),t=i.splice(n,t),o=Mr(i)),new Ir(r,t)}}function Ar(){var e=!0,t=!0,r=!0,i="use-collector-delta",o=!1;g(Ar,this,function(n){n.allowRequestSending=function(){return e},n.firstRequestSent=function(){r&&(r=!1,o||(e=!1))},n.shouldAddClockSkewHeaders=function(){return t},n.getClockSkewHeaderValue=function(){return i},n.setClockSkew=function(n){o||(n?(i=n,o=t=!0):t=!1,e=!0)}})}Ar.__ieDyn=1;var Br=Ar;function Lr(){var c={};g(Lr,this,function(n){n.setKillSwitchTenants=function(n,e){if(n&&e)try{o=n.split(","),u=[],o&&rn(o,function(n){u.push(be(n))});var t=u;if("this-request-only"===e)return t;for(var r=1e3*parseInt(e,10),i=0;i<t.length;++i)c[t[i]]=Ce()+r}catch(a){}var o,u;return[]},n.isTenantKilled=function(n){var e=c,n=be(n);return e[n]!==undefined&&e[n]>Ce()||(delete e[n],!1)}})}Lr.__ieDyn=1;var Nr=Lr,Hr=.8,Dr=1.2,qr=3e3,Fr=6e5;function Ur(n){var e=qr*Hr;return Math.min(Math.pow(2,n)*(Math.floor(Math.random()*(qr*Dr-e))+e),Fr)}var zr="metadata",jr="f",Xr=/\./,Qr=(Jr.__ieDyn=1,Jr);function Jr(e,n,b,t){var o="baseData",_=!!t,w=n,x={};g(Jr,this,function(g){function m(n,f,d,v,h,p,y){en(n,function(n,e){if(e||cn(e)){var t,r=d,i=n,o=h,u=f;if(_&&!v&&Xr.test(n)){var a=n.split("."),c=a.length;if(1<c){for(var o=o&&o.slice(),s=0;s<c-1;s++){var l=a[s],u=u[l]=u[l]||{};r+="."+l,o&&o.push(l)}i=a[c-1]}}(n=v&&((t=x[n=r])===undefined&&(7<=n.length&&(t=de(n,"ext.metadata")||de(n,"ext.web")),x[n]=t),t)||!w||!w.handleField(r,i)?function(n,e){if(!n&&!cn(n)||"string"!=typeof i)return null;var t=typeof n;if("string"==t||"number"==t||"boolean"==t||tn(n))n={value:n};else if("object"!=t||S.call(n,"value")){if(Y(n.value)||n.value===sr||!he(n.value)&&!pe(n.value)&&!ye(n.value)&&!tn(n.value))return null}else n={value:e?JSON.stringify(n):n};if(tn(n.value)&&!(0<n.value.length))return null;if(!Y(n.kind)){if(tn(n.value)||!(0===(t=n.kind)||0<t&&t<=13||32===t))return null;n.value=n.value.toString()}return n}(e,b):w.value(r,i,e,b))&&(t=n.value,u[i]=t,p&&p(o,i,n),y&&"object"==typeof t&&!tn(t)&&((n=o)&&(n=o.slice()).push(i),m(e,t,r+"."+i,v,n,p,y)))}})}g.createPayload=function(n,e,t,r,i,o){return{apiKeys:[],payloadBlob:"",overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:n,isTeardown:e,isSync:t,isBeacon:r,sendType:o,sendReason:i}},g.appendPayload=function(h,p,y){var n=h&&p&&!h.overflow;return n&&an(e,function(){return"Serializer:appendPayload"},function(){for(var n=p.events(),e=h.payloadBlob,t=h.numEvents,r=!1,i=[],o=[],u=h.isBeacon,a=u?65e3:3984588,c=u?65e3:2e6,s=0,l=0;s<n.length;){var f=n[s];if(f){if(y<=t){h.overflow=p.split(s);break}var d=g.getEventBlob(f);if(d&&d.length<=c){var v=d.length;if(a<e.length+v){h.overflow=p.split(s);break}e&&(e+="\n"),e+=d,20<++l&&(e.substr(0,1),l=0),r=!0,t++}else(d?i:o).push(f),n.splice(s,1),s--}s++}i&&0<i.length&&h.sizeExceed.push(Kr.create(p.iKey(),i)),o&&0<o.length&&h.failedEvts.push(Kr.create(p.iKey(),o)),r&&(h.batches.push(p),h.payloadBlob=e,h.numEvents=t,u=p.iKey(),-1===me(h.apiKeys,u)&&h.apiKeys.push(u))},function(){return{payload:h,theBatch:{iKey:p.iKey(),evts:p.events()},max:y}}),n},g.getEventBlob=function(i){try{return an(e,function(){return"Serializer.getEventBlob"},function(){var n={},r=(n.name=i.name,n.time=i.time,n.ver=i.ver,n.iKey="o:"+function(n){if(n){var e=n.indexOf("-");if(-1<e)return n.substring(0,e)}return sr}(i.iKey),{}),e=i.ext,e=(e&&(n.ext=r,en(e,function(n,e){m(e,r[n]={},"ext."+n,!0,null,null,!0)})),n.data={}),t=(e.baseType=i.baseType,e[o]={});return m(i.baseData,t,o,!1,[o],function(n,e,t){Wr(r,n,e,t)},!0),m(i.data,e,"data",!1,[],function(n,e,t){Wr(r,n,e,t)},!0),JSON.stringify(n)},function(){return{item:i}})}catch(n){return null}}})}function Wr(n,e,t,r){if(r&&n){var i=dr(r.value,r.kind,r.propertyType);if(-1<i){var o=n[zr],u=(u=(o=o||(n[zr]={f:{}}))[jr])||(o[jr]={});if(e)for(var a=0;a<e.length;a++)var c=e[a],u=(u[c]||(u[c]={f:{}}),u[c][jr]||(u[c][jr]={}));u=u[t]={},tn(r.value)?u.a={t:i}:u.t=i}}}var $r="sendAttempt",Vr="&NoResponseBody=true",Gr=((r={})[1]=n,r[100]=n,r[200]="sent",r[8004]=yr,r[8003]=yr,r),Yr={},Zr={};function ni(n,e,t){Yr[n]=e,!1!==t&&(Zr[e]=n)}function ei(n){try{return n.responseText}catch(e){}return""}function ti(n,e){var t=!1;if(n&&e){var r=xe(n);if(r&&0<r.length)for(var i=e.toLowerCase(),o=0;o<r.length;o++){var u=r[o];if(u&&e&&S[v](e,u)&&u.toLowerCase()==i){t=!0;break}}}return t}function ri(n,e,t,r){e&&t&&0<t.length&&(r&&Yr[e]?(n.hdrs[Yr[e]]=t,n.useHdrs=!0):n.url+="&"+e+"="+t)}function ii(n,e){return e&&(pe(e)?n=[e].concat(n):tn(e)&&(n=e.concat(n))),n}ni(Pr,Pr,!1),ni(xr,xr),ni(Sr,"Client-Id"),ni(Er,Er),ni(Tr,Tr),ni(Cr,Cr),ni(e,e),ui.__ieDyn=1;var oi=ui;function ui(T,n,C,l,f){this._responseHandlers=[];var E,P,R,k,O,M,K,I,A,B="?cors=true&content-type="+gr,L=new Nr,N=!1,H=new Br,D=!1,q=0,F=!0,U=[],z={},j=[],X=null,Q=!1,J=!1,W=!1;g(ui,this,function(y){var d=!0;function a(n,e){for(var t=0,r=null,i=0;null==r&&i<n.length;)1===(t=n[i])?(qe=null===qe&&(qe=typeof XDomainRequest!==V)&&Ze()?qe&&!Ue(on(Ne),"withCredentials"):qe)?r=o:Ze()&&(r=c):2!==t||!Ye(e)||e&&I?D&&3===t&&Ge()&&(r=s):r=u,i++;return r?{_transport:t,_isSync:e,sendPOST:r}:null}function o(n,e,t){var r=new XDomainRequest;r.open("POST",n.urlString),n.timeout&&(r.timeout=n.timeout),r.onload=function(){var n=ei(r);g(e,200,{},n),x(n)},r.onerror=function(){g(e,400,{})},r.ontimeout=function(){g(e,500,{})},r.onprogress=function(){},t?r.send(n.data):f.set(function(){r.send(n.data)},0)}function u(n,i,e){var t,r=n.urlString,o=!1,u=!1;(t={body:n.data,method:"POST"}).Microsoft_ApplicationInsights_BypassAjaxInstrumentation=!0;e&&(t.keepalive=!0,2===n._sendReason&&(o=!0,r+=Vr)),d&&(t.credentials="include"),n.headers&&0<xe(n.headers).length&&(t.headers=n.headers),fetch(r,t).then(function(n){var t={},e="",r=n.headers;r&&r.forEach(function(n,e){t[e]=n}),n.body&&n.text().then(function(n){e=n}),u||(u=!0,g(i,n.status,t,e),x(e))})["catch"](function(n){u||(u=!0,g(i,0,{}))}),o&&!u&&(u=!0,g(i,200,{})),!u&&0<n.timeout&&f.set(function(){u||(u=!0,g(i,500,{}))},n.timeout)}function c(n,o,e){var t=n.urlString;function u(n,e,t){return!n[t]&&e&&e.getResponseHeader&&(e=e.getResponseHeader(t))&&(n[t]=be(e)),n}function r(n,e){var t,r,i;g(o,n.status,(i={},(n=n).getAllResponseHeaders?(t=n.getAllResponseHeaders(),r={},he(t)&&rn(be(t).split(/[\r\n]+/),function(n){var e,t;n&&(-1!=(t=n.indexOf(": "))?(e=be(n.substring(0,t)).toLowerCase(),t=be(n.substring(1+t)),r[e]=t):r[be(n)]=1)}),r):(i=u(i,n,wr),i=u(i,n,_r),u(i,n,"kill-duration-seconds"))),e)}e&&n.disableXhrSync&&(e=!1),t=t,i=d,e=e,c=n.timeout,a=!0,void 0===e&&(e=!1),s=new XMLHttpRequest,a&&f(s,"Microsoft_ApplicationInsights_BypassAjaxInstrumentation",a),i&&f(s,lr,i),s.open("POST",t,!e),i&&f(s,lr,i),!e&&c&&f(s,"timeout",c);var i,a,c,s,l=s;function f(n,e,t){try{n[e]=t}catch(r){}}en(n.headers,function(n,e){l.setRequestHeader(n,e)}),l.onload=function(){var n=ei(l);r(l,n),x(n)},l.onerror=function(){r(l)},l.ontimeout=function(){r(l)},l.send(n.data)}function g(n,e,t,r){try{n(e,t,r)}catch(i){un(P,2,518,Z(i))}}function s(n,e,t){var r=200,i=n._thePayload,o=n.urlString+Vr;try{var u,a=Je();a.sendBeacon(o,n.data)||(i?(u=[],rn(i.batches,function(n){if(u&&n&&0<n.count()){for(var e=n.events(),t=0;t<e.length;t++)if(!a.sendBeacon(o,X.getEventBlob(e[t]))){u.push(n.split(t));break}}else u.push(n.split(0))}),S(u,8003,i.sendType,!0)):r=0)}catch(c){ct(P,"Failed to send telemetry using sendBeacon API. Ex:"+Z(c)),r=0}finally{g(e,r,{},"")}}function m(n){return 2===n||3===n}function r(n){return J&&m(n)?2:n}function i(){return!N&&q<n}function t(){var n=j;return j=[],n}function v(n,e,t){return n&&0<n.length&&!N&&R[e]&&X&&(0!==e||i()&&(0<t||H.allowRequestSending()))}function h(n){var t={};return n&&rn(n,function(n,e){t[e]={iKey:n.iKey(),evts:n.events()}}),t}function b(a,c,s,l,f){if(a&&0!==a.length)if(N)S(a,1,l);else{l=r(l);try{var n=a,d=0!==l;an(k,function(){return"HttpManager:_sendBatches"},function(n){n&&(a=a.slice(0));for(var e=[],t=null,r=sn(),n=R[l]||(d?R[1]:R[0]),i=n&&n._transport,o=A&&(J||m(l)||3===i||n._isSync&&2===i);v(a,l,c);){var u=a.shift();u&&0<u.count()&&(L.isTenantKilled(u.iKey())?e.push(u):(t=t||X.createPayload(c,s,d,o,f,l),X.appendPayload(t,u,T)?null!==t.overflow&&(a=[t.overflow].concat(a),t.overflow=null,p(t,r,sn(),f),r=sn(),t=null):(p(t,r,sn(),f),r=sn(),a=[u].concat(a),t=null)))}t&&p(t,r,sn(),f),0<a.length&&(j=a.concat(j)),S(e,8004,l)},function(){return{batches:h(n),retryCount:c,isTeardown:s,isSynchronous:d,sendReason:f,useSendBeacon:m(l),sendType:l}},!d)}catch(e){un(P,2,48,"Unexpected Exception sending batch: "+Z(e))}}}function _(n,e,t){n[e]=n[e]||{},n[e][E.identifier]=t}function p(v,a,c,h){var s,l,f,d,p;v&&v.payloadBlob&&0<v.payloadBlob.length&&(s=!!y.sendHook,l=R[v.sendType],!m(v.sendType)&&v.isBeacon&&2===v.sendReason&&(l=R[2]||R[3]||l),d=W,!v.isBeacon&&3!==l._transport||(d=!1),f=function(n,e){var t={url:B,hdrs:{},useHdrs:!1},r=(e?(t.hdrs=vr(t.hdrs,z),t.useHdrs=0<xe(t.hdrs).length):en(z,function(n,e){Zr[n]?ri(t,Zr[n],e,!1):(t.hdrs[n]=e,t.useHdrs=!0)}),ri(t,Sr,"NO_AUTH",e),ri(t,xr,"1DS-Web-JS-3.2.7",e),""),n=(rn(n.apiKeys,function(n){0<r.length&&(r+=","),r+=n}),ri(t,Er,r,e),ri(t,Cr,Ce().toString(),e),function(n){for(var e=0;e<n.batches.length;e++){var t=n.batches[e].Msfpc();if(t)return encodeURIComponent(t)}return""}(n));cn(n)&&(t.url+="&ext.intweb.msfpc="+n),H.shouldAddClockSkewHeaders()&&ri(t,Tr,H.getClockSkewHeaderValue(),e),k.getWParam&&0<=(n=k.getWParam())&&(t.url+="&w="+n);for(var i=0;i<U.length;i++)t.url+="&"+U[i].name+"="+U[i].value;return t}(v,d),d=d||f.useHdrs,p=sn(),an(k,function(){return"HttpManager:_doPayloadSend"},function(){for(var n=0;n<v.batches.length;n++)for(var e=v.batches[n].events(),t=0;t<e.length;t++){var r,i=e[t];Q&&(_(r=i.timings=i.timings||{},"sendEventStart",p),_(r,"serializationStart",a),_(r,"serializationCompleted",c)),0<i[$r]?i[$r]++:i[$r]=1}S(v.batches,1e3+(h||0),v.sendType,!0);var o={data:v.payloadBlob,urlString:f.url,headers:f.hdrs,_thePayload:v,_sendReason:h,timeout:M,disableXhrSync:K,disableFetchKeepAlive:I},u=(d&&(ti(o.headers,mr)||(o.headers[mr]="no-cache, no-store"),ti(o.headers,br)||(o.headers[br]=gr)),null);l&&(u=function(n){H.firstRequestSent();var e=function(n,e){var t,r,i=v,o=h,u=9e3,a=null,c=!1,s=!1;try{var l,f=!0;if(typeof n!==V){if(e&&(H.setClockSkew(e[wr]),d=e[_r]||e["kill-duration-seconds"],rn(L.setKillSwitchTenants(e["kill-tokens"],d),function(e){rn(i.batches,function(n){n.iKey()===e&&(a=a||[],n=n.split(0),i.numEvents-=n.count(),a.push(n))})})),200==n||204==n)return void(u=200);(300<=n&&n<500&&408!=n&&429!=n||501==n||505==n||i.numEvents<=0)&&(f=!1),u=9e3+n%1e3}f&&(u=100,l=i.retryCnt,0===i.sendType&&(l<C?(c=!0,w(function(){0===i.sendType&&q--,b(i.batches,l+1,i.isTeardown,J?2:i.sendType,5)},J,Ur(l))):(s=!0,J&&(u=8001))))}finally{if(!c){H.setClockSkew();var e=i,d=u,n=o,f=s;try{f&&E._backOffTransmission(),200===d&&(f||e.isSync||E._clearBackOff(),t=e.batches,Q&&(r=sn(),rn(t,function(n){var e;n&&0<n.count()&&(n=n.events(),e=r,Q&&rn(n,function(n){_(n.timings=n.timings||{},"sendEventCompleted",e)}))}))),S(e.batches,d,e.sendType,!0)}finally{0===e.sendType&&(q--,5!==n&&y.sendQueuedRequests(e.sendType,n))}}S(a,8004,i.sendType)}},t=v.isTeardown||v.isSync;try{l.sendPOST(n,e,t),y.sendListener&&y.sendListener(o,n,t,v.isBeacon)}catch(r){ct(P,"Unexpected exception sending payload. Ex:"+Z(r)),g(e,0,{})}}),an(k,function(){return"HttpManager:_doPayloadSend.sender"},function(){var e,t;u&&(0===v.sendType&&q++,s&&!v.isBeacon&&3!==l._transport?(e={data:o.data,urlString:o.urlString,headers:vr({},o.headers),timeout:o.timeout,disableXhrSync:o.disableXhrSync,disableFetchKeepAlive:o.disableFetchKeepAlive},t=!1,an(k,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{y.sendHook(e,function(n){t=!0,F||n._thePayload||(n._thePayload=n._thePayload||o._thePayload,n._sendReason=n._sendReason||o._sendReason),u(n)},v.isSync||v.isTeardown)}catch(n){t||u(o)}})):u(o))})},function(){return{thePayload:v,serializationStart:a,serializationCompleted:c,sendReason:h}},v.isSync)),v.sizeExceed&&0<v.sizeExceed.length&&S(v.sizeExceed,8003,v.sendType),v.failedEvts&&0<v.failedEvts.length&&S(v.failedEvts,8002,v.sendType)}function w(n,e,t){e?n():f.set(n,t)}function x(n){var e=y._responseHandlers;try{for(var t,r=0;r<e.length;r++)try{e[r](n)}catch(i){un(P,1,519,"Response handler failed: "+i)}n&&cn((t=JSON.parse(n)).webResult)&&cn(t.webResult[Rr])&&O.set("MSFPC",t.webResult[Rr],31536e3)}catch(o){}}function S(e,t,r,n){var i,o,u;e&&0<e.length&&l&&(i=l[cn(u=Gr[t])||(u="oth",9e3<=t&&t<=9999?u="rspFail":8e3<=t&&t<=8999?u=yr:1e3<=t&&t<=1999&&(u="send")),u])&&an(k,function(){return"HttpManager:_sendBatchesNotification"},function(){w(function(){try{i.call(l,e,t,o,r)}catch(n){un(P,1,74,"send request notification failed: "+n)}},n||o,0)},function(){return{batches:h(e),reason:t,isSync:o,sendSync:n,sendType:r}},!(o=0!==r))}y.initialize=function(n,e,t,r,i){B=n+B,W=!!G((i=i||{}).avoidOptions)||!i.avoidOptions,O=(k=e).getCookieMgr(),Q=!k.config.disableEventTimings;var o,n=!!k.config.enableCompoundKey,e=(P=(E=t).diagLog(),i.valueSanitizer),t=i.stringifyObjects,e=(G(i.enableCompoundKey)||(n=!!i.enableCompoundKey),M=i.xhrTimeout,K=!!i.disableXhrSync,I=!!i.disableFetchKeepAlive,D=!Ve(),X=new Qr(k,e,t,n),Y(i.useSendBeacon)||(D=!!i.useSendBeacon),r),t=i.alwaysUseXhrOverride?r:null,n=i.alwaysUseXhrOverride?r:null,u=[3,2];r||(F=!1,(o=typeof location===$&&location?location:on("location"))&&o.protocol&&"file:"==o.protocol.toLowerCase()&&(d=!1),o=[],Ve()?(o=[2,1],u=[2,1,3]):o=[1,2,3],(r=a(o=ii(o,i.transports),!1))||ct(P,"No available transport to send events"),e=a(o,!0)),t=t||a(u=ii(u,i.unloadTransports),!0),A=!F&&(D&&Ge()||!I&&Ye(!0)),(o={})[0]=r,o[1]=e||a([1,2,3],!0),o[2]=t||e||a([1],!0),o[3]=n||a([2,3],!0)||e||a([1],!0),R=o},y._getDbgPlgTargets=function(){return[R[0],L,X,R]},y.addQueryStringParameter=function(n,e){for(var t=0;t<U.length;t++)if(U[t].name===n)return void(U[t].value=e);U.push({name:n,value:e})},y.addHeader=function(n,e){z[n]=e},y.canSendRequest=function(){return i()&&H.allowRequestSending()},y.sendQueuedRequests=function(n,e){G(n)&&(n=0),J&&(n=r(n),e=2),v(j,n,0)&&b(t(),0,!1,n,e||0)},y.isCompletelyIdle=function(){return!N&&0===q&&0===j.length},y.setUnloading=function(n){J=n},y.addBatch=function(n){if(n&&0<n.count()){if(L.isTenantKilled(n.iKey()))return!1;j.push(n)}return!0},y.teardown=function(){0<j.length&&b(t(),0,!0,2,2)},y.pause=function(){N=!0},y.resume=function(){N=!1,y.sendQueuedRequests(0,4)},y.sendSynchronousBatch=function(n,e,t){n&&0<n.count()&&(Y(e)&&(e=1),J&&(e=r(e),t=2),b([n],0,!1,e,t||0))}})}function ai(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return setTimeout(n,e,t)}function ci(n){clearTimeout(n)}function si(n,e){return{set:n||ai,clear:e||ci}}var li,fi,di="eventsDiscarded",vi="overrideInstrumentationKey",hi="maxEventRetryAttempts",pi="maxUnloadEventRetryAttempts";function yi(){var E,P,R,k,O,M,K,I,n=li.call(this)||this,A=(n.identifier="PostChannel",n.priority=1011,!(n.version="3.2.7")),B=[],L=null,N=!1,H=0,D=500,q=0,F=1e4,U={},z=pr,j=null,X=null,Q=0,J=0,W={},$=-1,V=!0,G=!1,Y=6,Z=2;return g(yi,n,function(p,y){function g(n){"beforeunload"!==(n||je().event).type&&(G=!0,R.setUnloading(G)),s(2,2)}function m(n){G=!1,R.setUnloading(G)}function i(n,e){if(n.sendAttempt||(n.sendAttempt=0),n.latency||(n.latency=1),n.ext&&n.ext.trace&&delete n.ext.trace,n.ext&&n.ext[kr]&&n.ext[kr].id&&delete n.ext[kr].id,V&&(n.ext=Pe(n.ext),n.baseData&&(n.baseData=Pe(n.baseData)),n.data&&(n.data=Pe(n.data))),n.sync)if(Q||N)n.latency=3,n.sync=!1;else if(R)return V&&(n=Pe(n)),R.sendSynchronousBatch(Kr.create(n.iKey,[n]),!0===n.sync?1:n.sync,3);var t=n.latency,r=q,i=F,o=(4===t&&(r=H,i=D),!1);(o=r<i||(r=1,i=20,4===t&&(r=4,i=1),o=!0,function(n,e,t,r){for(;t<=e;){var i=l(n,e,!0);if(i&&0<i.count()){var i=i.split(0,r),o=i.count();if(0<o)return 4===t?H-=o:q-=o,_(di,[i],ke.QueueFull),1}t++}return d(),0}(n.iKey,n.latency,r,i))?(t=n,r=e,i=(t=V?Pe(n):t).latency,!((e=l(t.iKey,i,!0)).addEvent(t)&&(4!==i?(q++,r&&0===t.sendAttempt&&f(!t.sync,0<O&&e.count()>=O)):H++,1))):o)&&b(di,[n],ke.QueueFull)}function o(n,e,t){v(n,e,t),R.sendQueuedRequests(e,t)}function u(){0<=$&&v($,0,M)&&R.sendQueuedRequests(0,M),0<H&&!X&&!N&&0<=(n=U[z][2])&&(X=a(function(){X=null,o(4,0,1),u()},n));var n=U[z][1];!j&&!L&&0<=n&&!N&&(0<q?j=a(function(){j=null,o(0===J?3:1,0,1),J++,J%=2,u()},n):J=0)}function r(){A=!1,N=!(B=[]),D=500,F=1e4,U={},z=pr,J=Q=q=H=0,P=X=j=L=E=null,W={},k=undefined,O=0,$=-1,G=!(V=!(M=null)),Y=6,K=null,I=si(),R=new oi(500,Z=2,1,{requeue:n,send:t,sent:w,drop:x,rspFail:S,oth:T},I),e(),W[4]={batches:[],iKeyMap:{}},W[3]={batches:[],iKeyMap:{}},W[2]={batches:[],iKeyMap:{}},W[1]={batches:[],iKeyMap:{}},C()}function a(n,e){0===e&&Q&&(e=1);var t=1e3;return Q&&(t=Ur(Q-1)),I.set(n,e*t)}function c(){return null!==j&&(I.clear(j),j=null,!(J=0))}function s(n,e){c(),L&&(I.clear(L),L=null),N||o(1,n,e)}function l(n,e,t){var r=W[e],e=(r=r||W[e=1]).iKeyMap[n];return!e&&t&&(e=Kr.create(n),r.batches.push(e),r.iKeyMap[n]=e),e}function f(n,e){R.canSendRequest()&&!Q&&(e=0<k&&k<q||e)&&null==L&&p.flush(n,null,20)}function d(){for(var t=0,r=0,n=1;n<=4;n++)!function(e){var n=W[e];n&&n.batches&&rn(n.batches,function(n){4===e?t+=n.count():r+=n.count()})}(n);q=r,H=t}function v(r,n,e){var i=!1,t=0===n;return!t||R.canSendRequest()?an(p.core,function(){return"PostChannel._queueBatches"},function(){for(var e=[],t=4;r<=t;){var n=W[t];n&&n.batches&&0<n.batches.length&&(rn(n.batches,function(n){R.addBatch(n)?i=i||n&&0<n.count():e=e.concat(n.events()),4===t?H-=n.count():q-=n.count()}),n.batches=[],n.iKeyMap={}),t--}0<e.length&&b(di,e,ke.KillSwitch),i&&r<=$&&($=-1,M=0)},function(){return{latency:r,sendType:n,sendReason:e}},!t):($=0<=$?Math.min($,r):r,M=Math.max(M,e)),i}function e(){U={REAL_TIME:[2,1,0],NEAR_REAL_TIME:[6,3,0],BEST_EFFORT:[18,9,0]}}function n(n,e){var t=[],r=G?Z:Y;rn(n,function(n){n&&0<n.count()&&rn(n.events(),function(n){n&&(n.sync&&(n.latency=4,n.sync=!1),n.sendAttempt<r?(hr(n,p.identifier),i(n,!1)):t.push(n))})}),0<t.length&&b(di,t,ke.NonRetryableStatus),G&&s(2,2)}function h(n,e){var t=p._notificationManager||{},r=t[n];if(r)try{r.apply(t,e)}catch(i){un(p.diagLog(),1,74,n+" notification failed: "+i)}}function b(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];e&&0<e.length&&h(n,[e].concat(t))}function _(e,n){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];n&&0<n.length&&rn(n,function(n){n&&0<n.count()&&h(e,[n.events()].concat(t))})}function t(n,e,t){n&&0<n.length&&h("eventsSendRequest",[1e3<=e&&e<=1999?e-1e3:0,!0!==t])}function w(n,e){_("eventsSent",n,e),u()}function x(n,e){_(di,n,8e3<=e&&e<=8999?e-8e3:ke.Unknown)}function S(n){_(di,n,ke.NonRetryableStatus),u()}function T(n,e){_(di,n,ke.Unknown),u()}function C(){O=E&&E.disableAutoBatchFlushLimit?0:Math.max(1500,F/6)}r(),p._getDbgPlgTargets=function(){return[R]},p.initialize=function(d,v,h){an(v,function(){return"PostChannel:initialize"},function(){var e,n=v;y.initialize(d,v,h);try{v.addUnloadCb,K=Qt(St(p.identifier),v.evtNamespace&&v.evtNamespace());var t,r=p._getTelCtx(),i=(d.extensionConfig[p.identifier]=d.extensionConfig[p.identifier]||{},E=r.getExtCfg(p.identifier),I=si(E.setTimeoutOverride,E.clearTimeoutOverride),V=!E.disableOptimizeObj&&!!on("chrome"),e=n.getWParam,n.getWParam=function(){var n=0;return E.ignoreMc1Ms0CookieProcessing&&(n|=2),n|e()},0<E.eventsLimitInMem&&(F=E.eventsLimitInMem),0<E.immediateEventLimit&&(D=E.immediateEventLimit),0<E.autoFlushEventsLimit&&(k=E.autoFlushEventsLimit),pe(E[hi])&&(Y=E[hi]),pe(E[pi])&&(Z=E[pi]),C(),E.httpXHROverride&&E.httpXHROverride.sendPOST&&(P=E.httpXHROverride),cn(d.anonCookieName)&&R.addQueryStringParameter("anoncknm",d.anonCookieName),R.sendHook=E.payloadPreprocessor,R.sendListener=E.payloadListener,E.overrideEndpointUrl||d.endpointUrl),o=(p._notificationManager=d.extensionConfig.NotificationManager,R.initialize(i,p.core,p,P,E),d.disablePageUnloadEvents||[]),u=o,a=K,c=g;tn(t=[It,"unload",Mt])&&!$t(t,c,u,a)&&u&&0<u[nn]&&$t(t,c,null,a),function s(t,n,e){var r=Qt(At,e),i=$t([Mt],t,n,r);return!(i=(!n||-1===me(n,Ot))&&$t([Ot],function(n){var e=Xe();t&&e&&"hidden"===e.visibilityState&&t(n)},n,r)||i)&&n?s(t,null,e):i}(g,o,K),function l(t,n,e){var r=Qt(Bt,e),i=$t([Kt],t,n,r);return!(i=$t([Ot],function(n){var e=Xe();t&&e&&"visible"===e.visibilityState&&t(n)},n,r)||i)&&n?l(t,null,e):i}(m,d.disablePageShowEvents,K)}catch(f){throw p.setInitialized(!1),f}},function(){return{coreConfig:d,core:v,extensions:h}})},p.processTelemetry=function(n,e){hr(n,p.identifier);var t=(e=p._getTelCtx(e)).getExtCfg(p.identifier),r=!!E.disableTelemetry;(t?r||t.disableTelemetry:r)||A||(E[vi]&&(n.iKey=E[vi]),t&&t[vi]&&(n.iKey=t[vi]),i(n,!0),G?s(2,2):u()),p.processNext(n,e)},p._doTeardown=function(n,e){var t;s(2,2),A=!0,R.teardown(),Vt([It,"unload",Mt],null,K),t=Qt(At,K),Vt([Mt],null,t),Vt([Ot],null,t),t=Qt(Bt,K),Vt([Kt],null,t),Vt([Ot],null,t),r()},p.setEventQueueLimits=function(n,e){F=0<n?n:1e4,k=0<e?e:0,C();var t=n<q;if(!t&&0<O)for(var r=1;!t&&r<=3;r++){var i=W[r];i&&i.batches&&rn(i.batches,function(n){n&&n.count()>=O&&(t=!0)})}f(!0,t)},p.pause=function(){c(),N=!0,R.pause()},p.resume=function(){N=!1,R.resume(),u()},p.addResponseHandler=function(n){R._responseHandlers.push(n)},p._loadTransmitProfiles=function(n){c(),e(),z=pr,u(),en(n,function(n,e){var t,r=e.length;2<=r&&(t=2<r?e[2]:0,e.splice(0,r-2),e[1]<0&&(e[0]=-1),0<e[1]&&0<e[0]&&(r=e[0]/e[1],e[0]=Math.ceil(r)*e[1]),0<=t&&0<=e[1]&&t>e[1]&&(t=e[1]),e.push(t),U[n]=e)})},p.flush=function(n,e,t){void 0===n&&(n=!0),N||(t=t||1,n?null==L?(c(),v(1,0,t),L=a(function(){L=null,function r(n,e){o(1,0,e),d(),function t(n){R.isCompletelyIdle()?n():L=a(function(){L=null,t(n)},.25)}(function(){n&&n(),0<B.length?L=a(function(){L=null,r(B.shift(),e)},0):(L=null,u())})}(e,t)},0)):B.push(e):(n=c(),o(1,1,t),null!==e&&e!==undefined&&e(),n&&u()))},p.setMsaAuthTicket=function(n){R.addHeader(Pr,n)},p.hasEvents=function(){return 0<q},p._setTransmitProfile=function(n){z!==n&&U[n]!==undefined&&(c(),z=n,u())},p._backOffTransmission=function(){Q<4&&(Q++,c(),u())},p._clearBackOff=function(){Q&&(Q=0,c(),u())},Se(p,"_setTimeoutOverride",function(){return I.set},function(n){I=si(n,I.clear)}),Se(p,"_clearTimeoutOverride",function(){return I.clear},function(n){I=si(I.set,n)})}),n}function gi(){this.constructor=fi}fi=yi,typeof(n=li=Vn)!==c&&null!==n&&R("Class extends value "+n+" is not a constructor or null"),k(fi,n),fi[u]=(gi[u]=n[u],new gi),yi.__ieDyn=1;r=yi,i.BE_PROFILE="BEST_EFFORT",i.NRT_PROFILE="NEAR_REAL_TIME",i.PostChannel=r,i.RT_PROFILE=pr,e=i,Vn="__esModule",n={value:!0},r=Object.defineProperty;if(r)try{return r(e,Vn,n)}catch(mi){}typeof n.value!==undefined&&(e[Vn]=n.value)}(this.oneDS=this.oneDS||{});
//# sourceMappingURL=ms.post.gbl.min.js.map
